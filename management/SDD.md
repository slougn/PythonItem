# 识别烤箱中食材的软件设计文档

## 1. 引言

### 1.1 目的

本文档旨在描述识别烤箱中食材的软件应用程序的架构、组件、接口、数据流、算法等设计细节，以及软件开发过程中的标准和约定。本文档是为软件开发团队提供一个共同的指导和参考，以确保软件按照预期的方式构建和运行。

### 1.2 范围

本文档涵盖了以下范围：

- 软件应用程序的总体架构，包括系统层次结构、模块划分、功能分配等；
- 软件应用程序的主要组件，包括AI模型组件、用户界面组件、管理员界面组件等；
- 软件应用程序的主要接口，包括硬件接口、网络接口、外部接口等；
- 软件应用程序的主要数据流，包括图像数据流、文本数据流等；
- 软件应用程序的主要算法，包括深度学习算法、温度时间建议算法等；
- 软件开发过程中的标准和约定，包括编码规范、测试方法、版本控制等。

本文档不涵盖以下范围：

- 软件需求规格说明书（SRS），该文档已经在另一个文档中给出；
- 软件测试计划和报告，该文档将在另一个文档中给出；
- 软件用户手册和培训资料，该文档将在另一个文档中给出。

### 1.3 参考资料

本文档参考了以下资料：

- IEEE Std 1016-2009 IEEE Standard for Information Technology--Systems Design--Software Design Descriptions
- ISO/IEC/IEEE 42010:2011 Systems and software engineering — Architecture description
- Software Design Document: What is it & How to Create it! (Template Included) - Bit Blog
- AI files - What are they and how do you open them? | Adobe

## 2. 总体架构

### 2.1 系统层次结构

本软件应用程序采用三层架构模式设计，即表现层（Presentation Layer）、业务逻辑层（Business Logic Layer）和数据访问层（Data Access Layer）。如图1所示：

![image](https://user-images.githubusercontent.com/77609544/139521784-df4a0c8e-bb5c-4a7d-a6b0-fd9f8e7a9f5c.png)

图1：系统层次结构图

表现层负责与用户交互，并显示软件应用程序的输出结果。表现层包括用户界面组件和管理员界面组件。用户界面组件由摄像头、显示屏、控制面板等硬 件设备组成，负责接收用户的图像输入和按钮输入，并显示食材识别结果和温度时间建议结果。管理员界面组件由电脑或手机等设备组成，负责接收管理员用户的文本输入，并显示软件应用程序的运行状态和性能数据。

业务逻辑层负责处理用户的请求，并调用相应的算法和模型来实现软件应用程序的功能。业务逻辑层包括AI模型组件、温度时间建议组件等。AI模型组件负责识别食材类型和数量，并输出结果给表现层。温度时间建议组件负责根据食材类型和数量，以及用户选择的烘焙模式，给出合适的温度和时间建议，并输出结果给表现层。

数据访问层负责与外部数据源进行交互，并提供数据存储、读取、更新等服务。数据访问层包括图像数据源、文本数据源等。图像数据源负责提供训练数据、测试数据和实时数据给业务逻辑层。文本数据源负责提供软件版本信息、烘焙模式信息等给业务逻辑层。

### 2.2 模块划分

本软件应用程序根据功能划分为以下几个主要模块：

- 食材识别模块：该模块实现了食材识别功能，即通过深度学习算法识别出烤箱内部图像中食材的类型和数量，并输出结果；
- 温度时间建议模块：该模块实现了温度时间建议功能，即根据食材类型和数量，以及用户选择的烘焙模式，给出合适的温度和时间建议，并输出结果；
- 远程更新模块：该模块实现了远程更新功能，即通过无线网络连接，接收并安装软件应用程序的最新版本，并输出结果；
- 远程监控模块：该模块实现了远程监控功能，即通过无线网络连接，向管理员用户发送软件应用程序的运行状态和性能数据，并输出结果。

如图2所示：

![image](https://user-images.githubusercontent.com/77609544/139522058-fb0f1c3a-9d6e-4f8c-bb7a-d0e5d9c7f0b8.png)

图2：系统模块划分图

## 3. 主要组件

### 3.1 AI 模型组件

AI模型组件是实现食材识别功能的核心组件，负责接收图像数据，通过深度学习算法识别出食材类型和数量，并输出结果。AI模型组件的设计细节如下：

- 模型架构：AI模型组件采用卷积神经网络（CNN）作为主要的模型架构，CNN是一种常用于图像处理和分类的深度学习模型，能够有效地提取图像中的特征和信息。CNN由多个卷积层、池化层、全连接层等组成，每一层都有不同的功能和参数。如图3所示：

![image](https://user-images.githubusercontent.com/77609544/139522230-1d7f9c8a-6b0f-4e5c-a9a2-d8e6b7f1c0d4.png)

图3：CNN模型架构示意图

- 模型参数：AI模型组件的主要参数如表1所示：

| 参数名称 | 参数值 | 参数说明 |
| :-----: | :----: | :------ |
| 输入层大小 | 640x480x3 | 输入层接收大小为640x480像素，三通道（RGB）的彩色图像 |
| 卷积层1大小 | 32x5x5 | 卷积层1包含32个卷积核，每个卷积核大小为5x5像素 |
| 激活函数1类型 | ReLU | 激活函数1使用ReLU（线性整流单元）函数，将负值置为0，保留正值 |
| 池化层1大小 | 2x2 | 池化层1使用最大池化方法，将每个2x2像素区域内的最大值保留，降低数据维度 |
| 卷积层2大小 | 64x3x3 | 卷积层2包含64个卷积核，每个卷积核大小为3x3像素 |
| 激活函数2类型 | ReLU | 激活函数2使用ReLU（线性整流单元）函数，将负值置为0，保留正值 |
| 池化层2大小 | 2x2 | 池化层2使用最大池化方法，将每个2x2像素区域内的最大值保留，降低数据维度 |
| 全连接层1大小| 1024 | 全连接层1将池化层2的输出数据转换为一维向量，并使用1024个神经元进行连接 |
| 激活函数3类型 | ReLU | 激活函数3使用ReLU（线性整流单元）函数，将负值置为0，保留正值 |
| 全连接层2大小 | 20 | 全连接层2将全连接层1的输出数据转换为一维向量，并使用20个神经元进行连接，对应20种食材类型 |
| 输出层类型 | Softmax | 输出层使用Softmax函数，将全连接层2的输出数据转换为概率分布，并输出最大概率对应的食材类型和数量 |


表1：AI模型组件参数表

- 模型训练方法：AI模型组件使用训练数据进行训练和优化，训练数据包含至少20种常见食材（如鸡肉、牛肉、土豆等）的图像样本，每种食材至少1000张图像，每张图像大小为640x480像素，格式为JPEG。训练数据已经经过标注和划分，其中80%用于训练集，10%用于验证集，10%用于测试集。AI模型组件使用TensorFlow框架进行训练和部署，使用Adam优化器进行梯度下降更新参数，使用交叉熵损失函数作为目标函数，使用准确率作为评估指标。训练过程中设置以下参数：

  - 批次大小（batch size）：64
  - 学习率（learning rate）：0.001
  - 迭代次数（epoch）：50
- 模型测试方法：AI模型组件使用测试数据进行测试和验证，测试数据包含至少20种常见食材（如鸡肉、牛肉、土豆等）的图像样本，每种食材至少100张图像，每张图像大小为640x480像素，格式为JPEG。测试数据未经过标注和划分。AI模型组件对测试数据进行推理，并输出结果。结果与真实标签进行比较，并计算准确率。

### 3.2 用户界面组件

用户界面组件是实现与普通用户交互的主要组件，负责接收用户的图像输入和按钮输入，并显示食材识别结果和温度时间建议结果。用户界面组件的设计细节如下：

- 界面设计：用户界面组件由摄像头、显示屏、控制面板等硬件设备组成，形成一个简洁清晰、友好直观、符合用户习惯的界面。如图4所示：

![image](https://user-images.githubusercontent.com/77609544/139522424-0f9c7a1c-8d5b-4e3a-bb6f-d2c8e9d0f3a1.png)

图4：用户界面组件界面设计示意图

- 输入方式：用户界面组件支持两种输入方式，即图像输入和按钮输入。图像输入是指用户将食材放置在烤盘上，并将烤盘放入烤箱内，然后关闭烤箱门，此时摄像头会自动捕捉并传输图像数据给AI模型组件进行识别。按钮输入是指用户通过控制面板上的按钮进行操作，包括选择烘焙模式（预设或自定义）、确认或修改温度时间建议、开始或停止烘焙过程等。
- 输出方式：用户界面组件支持一种输出方式，即文本输出。文本输出是指显示屏上显示软件应用程序的输出结果，包括食材识别结果（食材类型和数量）、温度时间建议结果（温度和时间）、远程更新结果（软件版本信息）等。

### 3.3 管理员界面组件
管理员界面组件是实现与管理员用户交互的主要组件，负责接收管理员用户的文本输入，并显示软件应用程序的运行状态和性能数据。管理员界面组件的设计细节如下：

- 界面设计：管理员界面组件由电脑或手机等设备组成，形成一个灵活可控制、专业高效、符合管理需求的界面。如图5所示：

![image](https://user-images.githubusercontent.com/77609544/139522549-7a6c0f8a-9b4d-4e2f-bb9c-e1d5a3e8f6b7.png)

图5：管理员界面组件界面设计示意图

- 输入方式：管理员界面组件支持一种输入方式，即文本输入。文本输入是指管理员用户通过电脑或手机上的键盘或触屏进行操作，包括查询或修改软件版本信息、查询或修改烘焙模式信息、查询或修改AI模型参数等。
- 输出方式：管理员界面组件支持两种输出方式，即文本输出和图形输出。文本输出是指电脑或手机上显示软件应用程序的输出结果，包括软件版本信息、烘焙模式信息、AI模型参数等。图形输出是指电脑或手机上显示软件应用程序的运行状态和性能数据，包括CPU占用率、内存占用率、网络流量等。

## 4. 主要数据流

### 4.1 图像数据流
图像数据流是指从摄像头到AI模型组件之间的数据流，包括训练数据、测试数据和实时数据。图像数据流的主要特征和处理过程如下：

- 数据特征：图像数据是由像素组成的二维矩阵，每个像素有三个通道（RGB），表示红色、绿色和蓝色的强度。图像数据的大小为640x480像素，格式为JPEG，压缩率为80%。
- 数据处理：图像数据在传输和存储过程中需要进行压缩和解压缩，以减少占用空间和提高传输速度。图像数据在输入AI模型组件之前需要进行预处理，包括灰度化、归一化、增强等，以提高识别准确率。

### 4.2 文本数据流
文本数据流是指从用户界面组件或管理员界面组件到温度时间建议组件或远程更新组件或远程监控组件之间的数据流，包括软件版本信息、烘焙模式信息、食材识别结果、温度时间建议结果、运行状态信息、性能数据信息等。文本数据流的主要特征和处理过程如下：

- 数据特征：文本数据是由字符组成的一维字符串，每个字符有一个对应的ASCII码或Unicode码表示。文本数据的长度不固定，格式为TXT或JSON。
- 数据处理：文本数据在传输和存储过程中不需要进行压缩和解压缩，因为其占用空间较小且易于解析。文本数据在输入温度时间建议组件或远程更新组件或远程监控组件之前需要进行解析和验证，以确保其格式正确且符合逻辑。

## 5. 主要算法

### 5.1 深度学习算法
深度学习算法是实现食材识别功能的核心算法，负责接收图像